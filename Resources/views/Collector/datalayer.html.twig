{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
    <span class="icon"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wgEDS4ch3Ae/AAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAADqSURBVEjHY2AYBaOAZMCILnCSI8OJgYGpkZGBwQafxv8MDEf+/v1XbPV7xilkcSZMlUxzCBkGdYkNCxPTHHRxFkyF/4XYZIUZ9G814zXwnEQJw98P3+TQxZnwabqoVstwmjObgYGBgeHLsbsMpzmzGS6q1eK1CKuB/3/9Yfh6/hHD/19/cMv9/YfVQBZsgr9ffmK4ZtXJQKocQS+TA0YNxATchpCkxsTDDmdTZKDWsXIGBgYGBi49GTgbH2DBzKOMrxkZGPhhfFjCxppeGRnuEHbh379x//8zXCAcWv9P/f37P2u0fB0FVAAAdthJX5Xq0yEAAAAASUVORK5CYII=" alt=""></span>
      {% if collector.containers | length >= 1 %}
      <span class="sf-toolbar-status">{{ collector.events | length }} events</span>
      {% else %}
      <span class="sf-toolbar-status sf-toolbar-status-red">No active container !</span>
      {% endif %}
    {% endset %}

    {% set text %}
    <div class="sf-toolbar-info-piece">
        <b>Values</b>
        <span>{{ collector.values | length }}</span>
    </div>
    <div class="sf-toolbar-info-piece">
        <b>Unique events</b>
        <span>{{ collector.uniqueEventsCount }}</span>
    </div>
    {% endset %}

    {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', { 'link': true }) }}

{% endblock %}

{% block menu %}
    {# This left-hand menu appears when using the full-screen profiler. #}
    <span class="label">
        <span class="icon"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAIAAADY27xgAAAFN0lEQVR42u2Ye0xbdRTH7z/G8cfUaGLiRjI1mrhENIvLEk2mLMHNOAQHowMqNDxGHGJBHjJwkA15yDZEKFhYGAxCx8PSIo6wOLI5Nlx8ZEt0zgfqtO3t7S29vfe2hUEp4Lf30gbTdqGmLj6a/HLze5ye8/mdc37n9wOCJF77h7QwShgljBJG+d+hGIg9eiJudSMJaQAVqcJqCvoBVCWt1oNhECjgmLv644Le7PyVdE7pF343ucys8f5MfzSp1FNyF8PTuytA40/VXvZIt4uyuCycu5kY7lg/JteOIsHvufq+W1e+W+Rn2OpevllDRsiA4ivJFCqXl5e5hgFfA6I8Vpk8hen5EtP2ErZWhaG4tPYASfRELK8cXtCZ9cROwatSf2KJtp6zy4tLs+e+gi/9+OyZfNjWEy/BZwYimSQkGBojs7C0VhTRt/yJkQX9NAIcWObVuas/OdQTLsqqJ17xg7JFDtuGlSUpZtwoGzJDjwLPLc3O0y+UC/YSYWxNKBtDjyKFjOD/GHxN0aWIwu1R0Jbsc8aHMtEJLUoKHVu5dMupI7Y7pwzsuz3IsEAoXnrEUeQIJQpyma1TzV+/qSNiHCOXZ858biASboMCUOhEQz/kKAkw79BMIGPgkoWbFCQDoQgF4pStZ8x28gzmQ44S7/yZBASY6JgymARTQBRwj15BtcQQkQ1xruiJ3dCLOouCgU2jTz3yOswHDlCCjoj+O1BScRUIeiXQC3+gLjNvtRqIfYFQREeGHgWemE6vX3Yuwjcrte7L7+2nx1Fd7jgKVls0zh900C4ObV1j89/8guGdR9kze+GaY2RSPMCIi+WNZtFJvijeOwGqQo8C7S4jw76nQnVZsfrYAZgx3rXqAsfk028KKLugDbFD+4sots5Rl4kN5BUoNSdWkUSyB+5lzExnHjcIM143LHKOuS9u8B8O861a3J2L/CwSK8gHJRJTVs8dH/D37pKS62SO4QmSSPfuD2K8YsicXINN/+mgbczGQ8KhvWjXfmb/6Dy1OTfoEifSeDl8aXyvYgiDw/fYe6ODhuG/+Jkt8bzcksW9Ymf4iiVEzBWPbxJEeXG72LfnwZbi8YF01W8TIRkECqS5owN8k4Z6/MB0xjG+UUNHl9p7x83xh3FwnN/+hifm/NdTSEnjwzlzl67jAHMNg6bnisA3o5mkow9acpvpXWUzQ5PU1nwyIt3efc4cW4lVR/9F9nAv9K8dZZ/14Elqm5x6Mo8pVlKb88ySGq6231rW4b4Cb+iAMjt+jXoilyluszV9DCb20CmYR8ehvsRWdFtyGum4CqSwtfgEuS7dkq+A89x53axlStqgPxiU8i7BmUkwZtpSYE6qdqMUtuNM2brPGog4rknNyFthiasfRMiYgja2oktPxHPvq+3tY5bsBjqu0pxUZa3oRIwcqvP0jnKIzagvc3V9UBukV6JyjZH7mSIlFSU3J1Rxdf3YN1vayTX2Qyn+2mDylUxRG390EATWtzvYIz3wCt84ZOsYs2Q1iF6BHvLuNEtBi7CxvbxCy9WeBkpwuWJ9pwMQuGyZ3Ba8BPimYVQI+6lPOYUaKHzzEFujQvbwH2hJIo0paefqB8BkU35ikStwCdCxhxx9F0zPFpL3yPgWrWlrAWhs7aNstSqoB6XUuGk//WIZKRwEemcZ4IyR2eiT98qMm9BJNW7IItfL3J1Hc8j7ZLAHUPwQX/fkAxlkRBoVlSdokNI7SoGCeaS58cEMcn16UHVF6q1Fno5U/Pp2fIfer1fDarHwPzXCKGGU/zjKHzQ4gOIsbUi4AAAAAElFTkSuQmCC" alt=""/></span>
        <strong>TagCommander</strong>
    </span>
{% endblock %}

{% block panel %}
    {# Recursive macro for show all subvalues  #}
    {% macro show_subvalues(values) %}
        {% for key, value in values %}
            <tr>
                <th>{{ key }}</th>
                <td>
                    {% if value is iterable %}
                        <table>
                        {{ _self.show_subvalues(value) }}
                        </table>
                    {% else %}{{ value }}{% endif %}
                </td>
            </tr>
        {% endfor %}
    {% endmacro %}

    <h2>DataLayer</h2>
    <table>
        <thead>
            <tr>
                <th>key</th>
                <th>value</th>
            </tr>
        </thead>
        <tbody>
            {{ _self.show_subvalues(collector.values) }}
        </tbody>
    </table>

    <h2>Containers</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Script</th>
          <th>Version</th>
          <th>Alternative</th>
        </tr>
      </thead>
      <tbody>
      {% for container in collector.containers %}
        <tr>
          <td>{{ container.name }}</td>
          <td>{{ container.script }}</td>
          <td>{{ container.version }}</td>
          <td>{{ container.alternative }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>

    <h2>Events</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Tracker</th>
          <th>Nb Values</th>
        </tr>
      </thead>
    {% for event_name, events in collector.events %}
      {% for event in events %}
      <tr>
        <td>{{ event_name }}</td>
        <td>{{ event.tracker }}</td>
        <td>{{ event.values | length }}</td>
      </tr>
      {% endfor %}
    {% endfor %}
    </table>

{% endblock %}